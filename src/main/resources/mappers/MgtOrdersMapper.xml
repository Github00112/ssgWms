<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssg.wsmt.mgtOrders.mapper.MgtOrdersMapper">

    <select id="createOrder" resultType="java.lang.Long">
        INSERT INTO MGT_ORDERS(PURCHASER, STATUS, CREATED_AT, WAREHOUSE_ID) VALUES (#{purchaser}, #{status}, #{createdAt}, #{warehouseId})
    </select>

    <select id="addItem" resultType="java.lang.Boolean">
        INSERT INTO MGT_ORDERS_PRODUCTS_RELATIONSHIP(QUANTITY, PRODUCTS_ID, MGT_ORDERS_ID) VALUES (#{entry.getValue()}, #{entry.getKey()}, #{id})
    </select>

    <select id="updateStatus" resultType="java.lang.Integer">
        UPDATE MGT_ORDERS SET STATUS = #{status.name()} WHERE ID = #{orderId}

    </select>

    <select id="cancelOrder" resultType="java.lang.Integer">
        UPDATE MGT_ORDERS SET STATUS = 'CANCEL' WHERE ID = #{orderId}
    </select>

    <select id="selectAllForDate" resultType="java.util.ArrayList">
        SELECT * FROM MGT_ORDERS WHERE CREATED_AT BETWEEN #{startDate} AND #{endDate} +0.999999999
    </select>

    <select id="searchForStatus" resultType="java.util.ArrayList">
        SELECT * FROM MGT_ORDERS WHERE STATUS = #{status.name()}
    </select>

    <select id="insertList" resultType="java.lang.Boolean">
        UPDATE MGT_ORDERS SET STATUS = #{status} WHERE ID = #{num}
    </select>

    <select id="searchNoneDelived" resultType="java.util.ArrayList">
        SELECT * FROM MGT_ORDERS WHERE STATUS != 'DELIVERED' AND CREATED_AT BETWEEN #{date} AND #{date}+0.999999999
    </select>

    <select id="delete" resultType="java.lang.Integer">
        DELETE FROM MGT_ORDERS WHERE ID = #{orderId}
    </select>

    <select id="getOne" resultType="com.ssg.wsmt.mgtOrders.domain.MgtOrders">
        SELECT * FROM MGT_ORDERS where ID =#{id}
    </select>

    <select id="selectAll" resultType="com.ssg.wsmt.mgtOrders.domain.MgtOrders">
        SELECT * FROM MGT_ORDERS
    </select>
</mapper>